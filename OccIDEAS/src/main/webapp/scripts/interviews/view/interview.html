<!-- 
<span>DEBUG{{interview.showedQuestion | json}}</span> 
-->
<div id="interview-wrapper">
	<div class="col-md-4">
		<div >
			<div>
				<div ng-repeat="displayq in displayQuestions ">
					<div class="tree-node-content Q_interviewresult">
						<div class="form-group pull-left"
							style="margin-top: 5px; margin-left: -15px;">
							<span class="badge">{{displayq.number}}</span>
						</div>
						<span>{{ displayq.name }} </span>
					</div>
					<div class="tree-node-content P_interviewresult" ng-repeat="as in displayq.answers">
						<div class="form-group pull-left"
							style="margin-top: 5px; margin-left: -15px;">
							<span class="badge">{{as.number}}</span>
						</div>
						<span>{{as.answerFreetext?as.answerFreetext:as.name}} </span>
					</div>
				</div>
			</div>
		</div>
		<md-progress-circular ng-if="inProgress" md-mode="indeterminate"></md-progress-circular>
		<ul id="interviewing-{{interview.showedQuestion.idNode}}" ng-if="interview.interviewStarted && !inProgress">
			<md-toolbar>{{interview.showedQuestion.name}} <md-button
				id="numId" event-focus> <span class="badge">{{questionheader.name}}</span>
			<span class="badge">{{interview.showedQuestion.number}}</span> </md-button></md-toolbar>
			<div ng-if="interview.showedQuestion.type == 'Q_multiple'">
				<div ng-repeat="node in interview.showedQuestion.nodes">
					<md-checkbox ng-model="node.isSelected"
						ng-click="multiToggle(node, multiSelected)" class="green"
						select-free-text-on-click> <span
						ng-if="node.type!='P_freetext'">{{node.name}}</span> <md-input-container
						ng-if="node.type=='P_freetext'" md-no-float class="md-block">
					<label>Free Text</label> <input md-maxlength="30"
						ng-model="node.name"> <!-- <div ng-messages="node.name.$error">
          						<div ng-message="md-maxlength">The text has to be less than 30 characters long.</div>
        			  		</div> --> </md-input-container> </md-checkbox>
				</div>
			</div>
			<div ng-if="interview.showedQuestion.type == 'Q_frequency'">
				<div ng-repeat="node in interview.showedQuestion.nodes">
					<!-- <div>{{node.type}}</div> -->
					<div ng-switch="node.type">
						<div ng-switch-when="P_frequencyseconds">
							<md-input-container> <label>Seconds</label>
							<md-select ng-model="node.name"> <md-option
								ng-repeat="second in seconds" value="{{second}}">
							{{second}} </md-option> </md-select> </md-input-container>
						</div>
						<div ng-switch-when="P_frequencyweeks">
							<md-input-container> <label>Weeks</label> <md-select
								ng-model="node.name"> <md-option
								ng-repeat="week in weeks" value="{{week}}">
							{{week}} </md-option> </md-select> </md-input-container>
						</div>
						<div ng-switch-when="P_frequencyhours">
							<md-input-container> <label>Hours</label> <md-select
								ng-model="node.name"> <md-option
								ng-repeat="hour in hoursPerWeekArray" value="{{hour}}">
							{{hour}} </md-option> </md-select> </md-input-container>
						</div>
						<div ng-switch-when="P_frequencyshifthours">
							<md-input-container> <label>Hours</label> <md-select
								ng-model="interview.showedQuestion.hours"> <md-option
								ng-repeat="hour in hoursArray" value="{{hour}}">
							{{hour}} </md-option> </md-select> </md-input-container>
							<md-input-container> <label>Minutes</label>
							<md-select ng-model="interview.showedQuestion.minutes"> <md-option
								ng-repeat="minute in minutesArray" value="{{minute}}">
							{{minute}} </md-option> </md-select> </md-input-container>
						</div>
						<div ng-switch-when="P_frequencyhoursminute">
							<md-input-container> <label>Hours</label> <md-select
								ng-model="interview.showedQuestion.hours"> <md-option
								ng-repeat="hour in hoursArray" value="{{hour}}">
							{{hour}} </md-option> </md-select> </md-input-container>
							<md-input-container> <label>Minutes</label>
							<md-select ng-model="interview.showedQuestion.minutes"> <md-option
								ng-repeat="minute in minutesArray" value="{{minute}}">
							{{minute}} </md-option> </md-select> </md-input-container>
						</div>
						<div ng-switch-default>Unknown Frequency Type:{{node.type}}</div>
					</div>
				</div>
			</div>
			<div ng-if="interview.showedQuestion.type == 'Q_single' || interview.showedQuestion.type == 'Q_simple'">
				<md-radio-group ng-model="interview.showedQuestion.selectedAnswer">
				<div ng-repeat='node in interview.showedQuestion.nodes'>
					<div flex layout-align="start center">
						<md-radio-button flex ng-value="node"
							class="md-primary interview-radio-button"
							select-free-text-on-click> <span
							ng-if="node.type!='P_freetext'">{{node.name}}</span> <md-input-container
							ng-if="node.type=='P_freetext'" md-no-float class="md-block">
						<label>Free Text</label> <input md-maxlength="30"
							ng-model="node.name">
						<div ng-messages="node.name.$error">
							<div ng-message="md-maxlength">The text has to be less than
								30 characters long.</div>
						</div>
						</md-input-container> </md-radio-button>

					</div>
				</div>
			</div>

			<md-button ng-click="saveAnswerQuestion(interview.showedQuestion)"
				class="md-fab md-raised"> <span>NEXT</span> </md-button>
			
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<md-button class="md-primary md-raised interviewNotesButton"
				ng-click="showNotePrompt($event)"> Add Note </md-button>
			<div ng-repeat='note in interview.notes'>
				<div >{{$index+1}}:{{note.type}}:{{note.text}}:{{note.lastUpdated
					| date:'yyyy-MM-dd HH:mm:ss Z'}}</div>
			</div><p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<md-button ng-click="stopInterview(interview.showedQuestion)"
				class="md-fab md-raised"> <span>STOP</span> 
			</md-button>
		</ul>
		
		<div ng-if="interview.interviewEnded">Thanks!<p>The interview has now completed.  Please add any final interview notes and click FINISH</p>
			<md-input-container class="md-block"> <label>Interview Notes</label> 
			<textarea ng-model="interview.endNotes" md-maxlength="150"
				rows="5" md-select-on-focus></textarea> 
			</md-input-container>
			<md-button ng-click="finishInterview()" class="md-fab md-raised ">
			<span>FINISH</span> 
			</md-button>
		</div>

	</div>
</div>

<!-- Interview Display list starts here -->
<div class="col-md-8 moduleInterview" id="interview-question-list">
	<!-- <span class="badge" ng-click="toggleTreeList()">{{viewStatus}}</span> -->
	<div ng-if="showList">
		<div ui-tree="" id="tree-root1_{{$index}}" ng-repeat="element in intDisplay | orderBy:'sequence' track by $index">
			<div class="angular-ui-tree">
				<div class="tree-node">
					<!-- 			if element is a module display below -->
					<span class="M_Interview {{interviewIntro.active ? 'highlight':''}}" 
					      id="questionlist-{{element.idNode}}"
					      ng-if="element.type == 'M'">
						{{element.name}}
					</span>
					<!-- 			if element is a question display below -->
					<div ng-if="element.questionId">
						<div id="questionlist-{{element.questionId}}" 
							class="tree-node-content Q_interviewresult">
							<div class="form-group pull-left"
								style="margin-top: 5px; margin-left: -15px;">
								<span class="badge">
									{{element.number}} 
								</span>
							</div>
					<span class="glyphicon glyphicon-edit" style="margin-top: 5px;margin-left:2px;" aria-hidden="true" 
 			    							ng-click="vm.editQuestion(element)"></span>
 			    	<span ng-if="element.question.type.indexOf('multi') > -1" class="badge-multi">Multi</span>
		    		<span id="{{'IntResult'+element.idNode}}" >
		    			{{ element.name }}
		    		</span>  	
		    			</div>
		    		</div>		
		    		<!-- 			if element is a answer display below -->
					<div class="tree-node-content P_interviewresult"
						ng-repeat="as in element.answers | orderBy:orderByNumber">
						<div class="form-group pull-left"
							style="margin-top: 5px; margin-left: -15px;">
							<span class="badge"> 
							{{as.number}}</span>
						</div>
						<span id="{{'IntResult'+as.idNode}}">{{as.answerFreetext?as.answerFreetext:as.name}}
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div>
	<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
	<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
	<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
	</div>
</div>
<!-- Interview Display list ends here -->	
	

<script type="text/ng-template" id="interviewnodes_renderer.html">
  <div id="module-tree" class="angular-ui-tree">
     <div class="tree-node" id="{{node.id}}">
<!-- start content -->
        <div class="tree-node-content {{node.type}}_interviewresult" id="node-{{node.id}}">
		  <a class="btn btn-success btn-xs" data-nodrag="" ng-click="toggleCollapse(this)">
            <span ng-if="isCollapsableNode(node)" class="glyphicon glyphicon-chevron-down" ng-class="{
              'glyphicon-chevron-right': collapsed,
              'glyphicon-chevron-down': !collapsed
              }">
            </span>
          </a>
	      <span ng-if="node.multi" class="badge-multi">Multi</span>
          <span ng-if="isEditableNode(node)" class="glyphicon glyphicon-edit" 
			style="margin-top: 5px;margin-left:2px;" aria-hidden="true" 
			ng-click="vm.editQuestion(node)"></span>
          <span data-nodrag>{{node.name}}</span>

		  <div class="form-group pull-right" style="margin-top: 5px;">
    		<span class="badge">{{node.number}}</span>
		  </div>

       </div> 
<!-- end content -->
     </div>
  </div>
  <ol ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}">
    <li ng-repeat="node in node.nodes " ui-tree-node ng-include="'interviewnodes_renderer.html'" class="angular-ui-tree-node" collapsed="false"></li>
  </ol>
</script>