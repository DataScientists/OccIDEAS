<div id="interview-wrapper" >
	<div class="col-md-4">
		<div>
			<label>Language</label>
	<select ng-change="changeNodeLanguage(selectedLanguage)" ng-model="selectedLanguage"
			ng-options="option.language for option in languages track by option.id">
   </select>
			<div>
				<md-progress-linear ng-if="inProgress" md-mode="indeterminate"></md-progress-linear>	
			
				<div ng-repeat="displayq in displayQuestions ">
					
					<div class="tree-node-content P_interviewresult" ng-repeat="as in displayq.answers">
						<div class="form-group pull-left" style="margin-top: 5px; margin-left: -15px;">
							<span class="badge">{{as.number}}</span>
						</div>
						<span>{{as.answerFreetext?as.answerFreetext:as.name | translate}} </span>
					</div>
				</div>
			</div>
		</div>
		<div ng-if="!inProgress">
		<ul id="interviewing-{{interview.showedQuestion.idNode}}" ng-if="interviewStarted">
			<md-toolbar>{{interview.showedQuestion.name | translate}}
				<md-button id="numId" event-focus> <span class="badge">{{questionheader.name}}</span>
					<span class="badge">{{interview.showedQuestion.number}}</span> 
					
					</md-button>
			</md-toolbar>
			<div ng-if="interview.showedQuestion.nodes.length == 0">
				<md-button ng-click="closeOnStopButton()" class="md-fab md-raised ">
					<span>STOP</span>
				</md-button>
			</div>
			<div ng-if="interview.showedQuestion.nodes.length != 0">
			<div ng-if="interview.showedQuestion.type == 'Q_multiple'">
				<div ng-repeat="node in interview.showedQuestion.nodes">
					<md-checkbox aria-label="{{node.name}}" ng-model="node.isSelected" ng-click="multiToggle(node, multiSelected)" class="green" select-free-text-on-click>
						<span ng-if="node.type!='P_freetext'">{{node.name | translate}}</span>
						<md-input-container ng-if="node.type=='P_freetext'" md-no-float class="md-block">
							<label>Free Text</label>
							<input style="width: 270px;" ng-model="node.name" ng-keyup="allowSpaceOnFreeText($event,node)">
						</md-input-container>
					</md-checkbox>
				</div>
			</div>
			<div ng-if="interview.showedQuestion.type == 'Q_frequency'">
				<div ng-repeat="node in interview.showedQuestion.nodes">
					<!-- <div>{{node.type}}</div> -->
					<div ng-switch="node.type">
						<div ng-switch-when="P_frequencyseconds">
							<md-input-container>
								<label>Seconds</label>
								<md-select ng-model="node.name">
									<md-option ng-repeat="second in seconds" value="{{second}}">
										{{second}} 
										</md-option>
								</md-select>
							</md-input-container>
						</div>
						<div ng-switch-when="P_frequencyweeks">
							<md-input-container>
								<label>Weeks</label>
								<md-select ng-model="node.name">
									<md-option ng-repeat="week in weeks" value="{{week}}">
										{{week}} </md-option>
								</md-select>
							</md-input-container>
						</div>
						<div ng-switch-when="P_frequencyhours">
							<md-input-container>
								<label>Hours</label>
								<md-select ng-model="node.name">
									<md-option ng-repeat="hour in hoursPerWeekArray" value="{{hour}}">
										{{hour}} </md-option>
								</md-select>
							</md-input-container>
						</div>
						<div ng-switch-when="P_frequencyshifthours">
							<md-input-container>
								<label>Hours</label>
								<md-select ng-model="interview.showedQuestion.hours">
									<md-option ng-repeat="hour in hoursArray" value="{{hour}}">
										{{hour}} </md-option>
								</md-select>
							</md-input-container>
							<md-input-container>
								<label>Minutes</label>
								<md-select ng-model="interview.showedQuestion.minutes">
									<md-option ng-repeat="minute in minutesArray" value="{{minute}}">
										{{minute}} </md-option>
								</md-select>
							</md-input-container>
						</div>
						<div ng-switch-when="P_frequencyhoursminute">
							<md-input-container>
								<label>Hours</label>
								<md-select ng-model="interview.showedQuestion.hours">
									<md-option ng-repeat="hour in hoursArray" value="{{hour}}">
										{{hour}} </md-option>
								</md-select>
							</md-input-container>
							<md-input-container>
								<label>Minutes</label>
								<md-select ng-model="interview.showedQuestion.minutes">
									<md-option ng-repeat="minute in minutesArray" value="{{minute}}">
										{{minute}} </md-option>
								</md-select>
							</md-input-container>
						</div>
						<div ng-switch-default>Unknown Frequency Type:{{node.type}}</div>
					</div>
				</div>
			</div>
			<div ng-if="interview.showedQuestion.type == 'Q_single' || interview.showedQuestion.type == 'Q_simple'">
				<md-radio-group ng-model="interview.showedQuestion.selectedAnswer">
					<div ng-repeat='node in interview.showedQuestion.nodes'>
						<div flex layout-align="start center">
							<md-radio-button flex ng-value="node" class="md-primary interview-radio-button" select-free-text-on-click> <span ng-if="node.type!='P_freetext'">{{node.name | translate}}</span>
								<md-input-container ng-if="node.type=='P_freetext'" md-no-float class="md-block">
									<label>Free Text</label>
									<input style="width: 270px;" ng-model="node.name">
								</md-input-container>
							</md-radio-button>

						</div>
					</div>
				</md-radio-group>
			</div>

			<md-button ng-click="saveAnswerQuestionNew(interview.showedQuestion)" class="md-fab md-raised"> 
			<span>NEXT</span> 
			</md-button>
					
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<md-button class="md-primary md-raised interviewNotesButton" ng-click="showNotePrompt($event)"> Add Note </md-button>
			<ol>
				<li ng-if="note.type=='Interviewer'" ng-repeat='note in interview.notes'>
					{{note.text}}
				</li>
			</ol>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<p>&nbsp;</p>
			<md-button ng-click="stopInterview(interview.showedQuestion)" class="md-fab md-raised"> 
			<span>STOP</span>
			</md-button>
			</div>
		</ul>
		</div>
		<div ng-if="participant.status != 1">
			<div ng-if="interviewEnded">Thanks!
				<p>The interview has now come to the end. Please add any final interview notes and click FINISH to mark it as complete</p>
				<md-input-container class="md-block">
					<label>Final Interview Notes</label>
					<textarea ng-model="interview.endNotes" md-maxlength="1000" rows="5" md-select-on-focus></textarea>
				</md-input-container>
				<md-button ng-click="finishInterview()" class="md-fab md-raised ">
					<span>FINISH</span>
				</md-button>
				<ol>
				<li ng-if="note.type=='Interviewer'" ng-repeat='note in interview.notes'>
					{{note.text}}
				</li>
				</ol>
				
			</div>
		</div>
		<div ng-if="participant.status == 1">
			<div ng-if="interviewEnded">Interview Stopped!
				<p>The interview is only partial complete. Please add some interview notes about why it was stopped.</p>
				<md-button ng-click="closeOnStopButton()" class="md-fab md-raised ">
					<span>STOP</span>
				</md-button>
				<p>&nbsp;</p>
				<md-button class="md-primary md-raised interviewNotesButton" ng-click="showNotePrompt($event)"> Add Note </md-button>
				<ol>
				<li ng-if="note.type=='Interviewer'" ng-repeat='note in interview.notes'>
					{{note.text}}
				</li>
				</ol>
				<p>&nbsp;</p>
				
				
			</div>
		</div>
	</div>
</div>

<!-- Interview History list starts here -->
<div class="col-md-8 moduleInterview" id="interview-question-list">
	
	
		<div ui-tree="" id="tree-root1_{{$index}}" ng-repeat="element in displayHistoryNew | orderBy:'lastUpdated':true">
			<div class="angular-ui-tree">
				<div class="tree-node">
					<div id="questionlist-{{element.questionId}}" class="tree-node-content Q_interviewresult {{element.link ? 'Q_link':''}} {{element.processed ? 'Q_processed':''}}">
						<div class="form-group pull-left" style="margin-top: 5px; margin-left: -15px;">
<!-- 							<span ng-if="!element.processed" class="badge-unprocessed " title="scheduled"> -->
<!-- 								&nbsp; -->
<!-- 							</span> -->
							<span ng-if="element.deleted" class="badge-deleted" title="deleted">
								&nbsp;
							</span>
							<span class="badge">
								{{element.header}}
							</span>
							<span class="badge" title="qid:{{element.questionId}}">
								{{element.number}}
							</span>
							<span class="badge">
								{{element.lastUpdated | date : 'dd/MM/yyyy HH:mm:ss'}}
							</span>
						</div>
						<span ng-if="!element.deleted && !element.link" ng-click="showEditQuestionPrompt($event,element)"  class="glyphicon glyphicon-edit" style="margin-top: 5px;margin-left:2px;" aria-hidden="true" ></span>
						<span id="{{'IntResult'+element.idNode}}" data-toggle="tooltip" data-placement="bottom" title="{{ element.name }}">{{ element.name | translate}}</span>
					</div>
					<!-- 			show answers -->				
					<div class="tree-node-content P_interviewresult" ng-repeat="as in element.answers | orderBy:orderByNumber">
						<span ng-if="as.deleted" class="badge-deleted" title="deleted">
								&nbsp;
							</span>
						<div class="form-group pull-left" style="margin-top: 5px; margin-left: -15px;">
							<span class="badge">{{as.number}}</span>	
							
							<span permission="['ROLE_ADMIN']" class="badge">
								{{as.lastUpdated | date : 'dd/MM/yyyy HH:mm:ss'}}
							</span>				
						</div>
						<span id="{{'IntResult'+as.idNode}}" data-toggle="tooltip" data-placement="bottom" title="{{as.answerFreetext?as.answerFreetext:as.name}}">{{as.answerFreetext | translate}}
						</span>
					</div>
				</div>
			</div>
		</div>
	
	<div>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
	</div>
</div>
<!-- Interview History list ends here -->
