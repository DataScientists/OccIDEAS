<div ng-cloak>
    <div>
        <button id="addBook" class="btn btn-default"
                ng-click="vm.add()"
                type="button">Add Book <span class="glyphicon glyphicon-plus">
      </span></button>
        <table class="table table-bordered table-hover table-condensed editable-table"
               ng-table="vm.tableParams"
               demo-tracked-table="vm.tableTracker"
               ng-form="tableForm"
               show-filter="true">


            <tbody ng-repeat="group in $groups">
            <tr class="ng-table-group">
                <td colspan="{{$columns.length}}">
                    <div style="display: flex; flex-direction: row; justify-content: space-between;">
                        <div>
                            <a href="" ng-click="group.$hideRows = !group.$hideRows">
          	<span
                    class="glyphicon"
                    ng-class="{ 'glyphicon-chevron-right': group.$hideRows,
            'glyphicon-chevron-down': !group.$hideRows }"></span>
                                <strong> {{ group.value }}</strong>
                            </a>
                        </div>
                        <div>
                            <button class="btn btn-primary btn-sm"
                                    ng-click="vm.downloadJson(group.value,group.data)"
                                    title="Download as JSON">
                                <span class="glyphicon glyphicon-download"></span>
                            </button>
                            <button class="btn btn-primary btn-sm"
                                    ng-click="vm.compareBooks(group)"
                                    title="Compare Books">
                                <span class="glyphicon glyphicon-book"></span>
                            </button>
                            <button class="btn btn-sm"
                                    style="background-color: red"
                                    ng-click="vm.deleteBook(group)"
                                    title="Delete Book {{group.value}}">
                                <span class="glyphicon glyphicon-trash"></span>
                            </button>
                        </div>
                    </div>
                </td>
            </tr>

            <tr demo-tracked-table-row="row" ng-form="rowForm"
                ng-hide="group.$hideRows" ng-repeat="data in group.data">
                <td colspan="{{$columns.length}}" style="padding: 2px">
                    <div ng-repeat="module in data.modules" style="padding: 2px; width: 50%; border: 1px solid #2e6da4">
                        <div style="padding: 2px; width: 100%; display: flex; flex-direction: row; justify-content: space-between;">
                            <div>{{module.fileName}}</div>
                            <div>
                                <button class="btn btn-primary btn-sm"
                                        ng-click="vm.downloadJson(data.name,module,module.fileName)"
                                        title="Download as JSON">
                                    <span class="glyphicon glyphicon-download"></span>
                                </button>
                                <button class="btn btn-default"
                                        title="Delete Module {{module.fileName}}"
                                        style="background-color: red"
                                        ng-click="vm.deleteModuleInBook(data.name, module)">
                                    <span class="glyphicon glyphicon-trash"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>
